{"version":3,"sources":["bin/commands/lintCommand.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAYA,IAAM,cAAc,SAAd,WAAc,CAAC,IAAD,EAAU;;AAE1B;;;;KAEK,MAFL,CAEY,CAFZ,EAEe,CAFf,EAGK,IAHL,CAF0B;;AAO1B,8BACK,IADL,CACU,UAAC,KAAD,EAAW;AACb,YAAM,SAAS,yBAAS,KAAT,EAAgB;AAC3B,sBAAU,KAAK,QAAL;AACV,oBAAQ,KAAK,MAAL;SAFG,CAAT,CADO;;AAMb,+BAAa;AACT,wBAAY,OAAO,UAAP;AACZ,qBAAS,CACL,MADK,CAAT;AAGA,0BAAc,OAAO,YAAP;SALlB,EAMG,KAAK,YAAL,CANH,CANa;KAAX,CADV,CAP0B;CAAV;;AAwBpB,IAAM,kBAAkB,SAAlB,eAAkB,CAAC,IAAD,EAAU;;AAE9B,oBAEK,MAFL,CAEY,CAFZ,EAGK,IAHL,CAF8B;;AAO9B,QAAM,cAAc,yBAAe,KAAK,CAAL,CAA7B,CAPwB;;AAS9B,QAAM,SAAS,0BAAU,WAAV,CAAT,CATwB;;AAW9B,2BAAa,MAAb,EAAqB,KAAK,YAAL,CAArB,CAX8B;CAAV;;kBAcT,UAAC,QAAD,EAAc;AACzB,aACK,WADL,CACiB,KADjB,EAEK,IAFL,mBADyB;;AAKzB,QAAM,OAAO,qBAAM,QAAQ,IAAR,CAAa,MAAb,CAAoB,CAApB,CAAN,EACR,WADQ,CACI,KADJ,EAER,IAFQ,mBAGR,IAHQ,CAGH,MAHG,EAIR,MAJQ,GAKR,OALQ,CAKA;AACL,qBAAa;AACT,qBAAS,QAAT;AACA,sBAAU,uEAAV;AACA,kBAAM,QAAN;SAHJ;AAKA,yBAAiB;AACb,qBAAS,CACL,MADK,EAEL,YAFK,EAGL,OAHK,CAAT;AAKA,qBAAS,OAAT;SANJ;AAQA,eAAO;AACH,qBAAS,KAAT;AACA,sBAAU,6DAAV;AACA,kBAAM,SAAN;SAHJ;AAKA,gBAAQ;;AAEJ,qBAAS,CACL,KADK,EAEL,IAFK,EAGL,MAHK,EAIL,MAJK,CAAT;AAMA,oBAAQ,KAAR;AACA,sBAAU,sBAAV;SATJ;KAxBK,EAoCR,IApCQ,CALY;;AA2CzB,QAAI,KAAK,KAAL,EAAY;AACZ,oBAAY,IAAZ,EADY;KAAhB,MAEO;AACH,wBAAgB,IAAhB,EADG;KAFP;CA3CW","file":"bin/commands/lintCommand.js","sourcesContent":["import yargs from 'yargs';\nimport getStdin from 'get-stdin';\nimport {\n    lintFiles,\n    lintText\n} from './../../utilities';\nimport {\n    failHandler,\n    getTargetPaths,\n    outputReport\n} from './../../utilities/bin';\n\nconst handleStdin = (argv) => {\n    /* eslint-disable no-unused-expressions */\n    yargs\n    /* eslint-enable */\n        .demand(0, 0)\n        .argv;\n\n    getStdin()\n        .then((stdin) => {\n            const report = lintText(stdin, {\n                filePath: argv.filePath,\n                syntax: argv.syntax\n            });\n\n            outputReport({\n                errorCount: report.errorCount,\n                results: [\n                    report\n                ],\n                warningCount: report.warningCount\n            }, argv.outputFormat);\n        });\n};\n\nconst handleFilePaths = (argv) => {\n    /* eslint-disable no-unused-expressions */\n    yargs\n    /* eslint-enable */\n        .demand(1)\n        .argv;\n\n    const targetPaths = getTargetPaths(argv._);\n\n    const report = lintFiles(targetPaths);\n\n    outputReport(report, argv.outputFormat);\n};\n\nexport default (subYargs) => {\n    subYargs\n        .exitProcess(false)\n        .fail(failHandler);\n\n    const argv = yargs(process.argv.splice(3))\n        .exitProcess(false)\n        .fail(failHandler)\n        .help('help')\n        .strict()\n        .options({\n            'file-path': {\n                default: '<text>',\n                describe: 'Name of the file being linted with stdin (if any). Used in reporting.',\n                type: 'string'\n            },\n            'output-format': {\n                choices: [\n                    'json',\n                    'checkstyle',\n                    'table'\n                ],\n                default: 'table'\n            },\n            stdin: {\n                default: false,\n                describe: 'Used to indicate that subject body will be read from stdin.',\n                type: 'boolean'\n            },\n            syntax: {\n                // @todo This need to be true when using stdin.\n                choices: [\n                    'css',\n                    'js',\n                    'json',\n                    'scss'\n                ],\n                demand: false,\n                describe: 'Syntax of the input.'\n            }\n        })\n        .argv;\n\n    if (argv.stdin) {\n        handleStdin(argv);\n    } else {\n        handleFilePaths(argv);\n    }\n};\n"],"sourceRoot":"/source/"}